<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/reset.css" />
    <link
      rel="stylesheet"
      href="//unpkg.com/a11y-slider@latest/dist/a11y-slider.css"
    />
    <link rel="stylesheet" href="./css/style.css" />
    <title>Immo</title>
  </head>
  <body class="home">
    <!-- Header -->
    <header>
      <nav class="primary-navigation">
        <div class="primary-navigation__wrapper">
          <div class="primary-navigation__logo">
            <a href="./index.html">
              <img src="./public/vite.svg" alt="Vite Logo" />
            </a>
          </div>
          <div class="primary-navigation__links desktop">
            <ul>
              <li>
                <a class="btn btn-outline" href="./index.html">
                  <div class="btn-text">
                    <div>Home</div>
                    <div aria-hidden="true">Home</div>
                  </div>
                </a>
              </li>
              <li>
                <a class="btn" href="./about.html">
                  <div class="btn-text">
                    <div>About</div>
                    <div>About</div>
                  </div>
                </a>
              </li>
              <li>
                <a class="btn" href="./contact.html">
                  <div class="btn-text">
                    <div>Contact</div>
                    <div>Contact</div>
                  </div>
                </a>
              </li>
              <li>
                <a class="btn btn-filled-icon" href="./contact.html">
                  <div class="btn-text">
                    <div>Get in Touch</div>
                    <div>Get in Touch</div>
                  </div>
                  <img
                    class="btn-icon"
                    src="./public/icons/arrow-right.svg"
                    alt=""
                  />
                </a>
              </li>
            </ul>
          </div>
          <div class="primary-navigation__hamburger mobile">
            <button data-active="false" class="hamburger" onclick="toggleNav()">
              <div class="hamburger__line"></div>
              <div class="hamburger__line"></div>
              <div class="hamburger__line"></div>
            </button>
            <span class="mobile-navigation__overlay"></span>
            <nav class="mobile-navigation">
              <ul>
                <li><a href="#">Home</a></li>

                <li><a href="#">About</a></li>

                <li><a href="#">Contact</a></li>
                <li><a href="#">Get in Touch</a></li>
              </ul>
            </nav>
          </div>
        </div>
      </nav>
    </header>

    <!-- Main -->
    <main>
      <!-- Hero Section -->
      <section class="hero-section">
        <!-- H1 -->
        <h1>
          <div class="line"><span>Wohnbauprojekt</span></div>
          <div class="line"><span>Pernau</span></div>
        </h1>

        <div class="hero-section__content">
          <!-- Subtitle -->
          <p class="subtitle">
            Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
            nonumy.
          </p>

          <!-- Button-container -->
          <div class="button-container">
            <!-- Filled Button -->
            <a class="btn btn-filled-icon" href="./contact.html">
              <div class="btn-text">
                <div>Get in Touch</div>
                <div>Get in Touch</div>
              </div>
              <img
                class="btn-icon"
                src="./public/icons/arrow-right.svg"
                alt=""
              />
            </a>

            <!-- Outlined Button -->
            <a class="btn btn-outline" href="./index.html">
              <div class="btn-text">
                <div>News</div>
                <div>News</div>
              </div>
            </a>
          </div>
        </div>

        <!-- Parallax -->
        <div class="parallax">
          <!-- <div class="bg"></div> -->
          <img
            class="parallax__image"
            src="./public/images/hero-image-big.jpg"
            alt=""
          />
        </div>
      </section>

      <!-- Slogan Section -->
      <section class="slogan-section">
        <h2 class="slogan">
          Entdecken Sie moderne Architektur, gehobenen Lebensstil und
          erstklassige Lage im neuen Immobilienprojekt in Linz. Erleben Sie
          Wohnen auf höchstem Niveau.
        </h2>
        <div class="button-container">
          <a class="btn btn-filled-icon" href="./contact.html">
            <div class="btn-text">
              <div>Mehr zum Projekt</div>
              <div>Mehr zum Projekt</div>
            </div>
            <img class="btn-icon" src="./public/icons/arrow-right.svg" alt="" />
          </a>
        </div>
      </section>

      <!-- Slider Section -->
      <section class="slider-section">
        <button
          data-active="true"
          class="next-slide-btn"
          onclick="increaseIndex()"
        >
          Next Slide
        </button>
        <button
          data-active="true"
          class="prev-slide-btn"
          onclick="decreaseIndex()"
        >
          Previous Slide
        </button>

        <div class="slider">
          <!-- first Slide -->
          <div
            class="slide active-slide"
            style="
              background-image: radial-gradient(
                  circle at 100% 100%,
                  rgb(0 0 0 / 0.6),
                  rgb(0 0 0 / 0) 50%
                ),
                url(./public/images/image3.png);
            "
          >
            <div class="slide__content">
              <h3>
                1200m²<br />
                Handel- &<br />
                Gastrofläche
              </h3>
              <div class="button-container">
                <a class="btn btn-filled-icon" href="#">
                  <div class="btn-text">
                    <div>Mehr zum Projekt</div>
                    <div>Mehr zum Projekt</div>
                  </div>
                  <img
                    class="btn-icon"
                    src="./public/icons/arrow-right-black.svg"
                    alt=""
                  />
                </a>
              </div>
            </div>
          </div>

          <!-- Second Slide -->
          <div
            class="slide"
            style="
              background-image: radial-gradient(
                  circle at 100% 100%,
                  rgb(0 0 0 / 0.6),
                  rgb(0 0 0 / 0) 50%
                ),
                url(./public/images/image4.png);
            "
          >
            <div class="slide__content">
              <h3>
                1200m²<br />
                Handel- &<br />
                Gastrofläche
              </h3>
              <div class="button-container">
                <a class="btn btn-filled-icon" href="#">
                  <div class="btn-text">
                    <div>Mehr zum Projekt</div>
                    <div>Mehr zum Projekt</div>
                  </div>
                  <img
                    class="btn-icon"
                    src="./public/icons/arrow-right-black.svg"
                    alt=""
                  />
                </a>
              </div>
            </div>
          </div>

          <!-- Third Slide -->
          <div
            class="slide"
            style="
              background-image: radial-gradient(
                  circle at 100% 100%,
                  rgb(0 0 0 / 0.6),
                  rgb(0 0 0 / 0) 50%
                ),
                url(./public/images/image5.jpg);
            "
          >
            <div class="slide__content">
              <h3>
                1200m²<br />
                Handel- &<br />
                Gastrofläche
              </h3>
              <div class="button-container">
                <a class="btn btn-filled-icon" href="#">
                  <div class="btn-text">
                    <div>Mehr zum Projekt</div>
                    <div>Mehr zum Projekt</div>
                  </div>
                  <img
                    class="btn-icon"
                    src="./public/icons/arrow-right-black.svg"
                    alt=""
                  />
                </a>
              </div>
            </div>
          </div>

          <!-- Fourth Slide -->
          <div
            class="slide"
            style="
              background-image: radial-gradient(
                  circle at 100% 100%,
                  rgb(0 0 0 / 0.6),
                  rgb(0 0 0 / 0) 50%
                ),
                url(./public/images/image6.jpg);
            "
          >
            <div class="slide__content">
              <h3>
                1200m²<br />
                Handel- &<br />
                Gastrofläche
              </h3>
              <div class="button-container">
                <a class="btn btn-filled-icon" href="#">
                  <div class="btn-text">
                    <div>Mehr zum Projekt</div>
                    <div>Mehr zum Projekt</div>
                  </div>
                  <img
                    class="btn-icon"
                    src="./public/icons/arrow-right-black.svg"
                    alt=""
                  />
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- footer -->
    <footer></footer>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>

    <!-- Scripts -->

    <!-- Menu -->
    <script>
      function toggleNav() {
        const hamburger = document.querySelector(".hamburger");
        const mobileNav = document.querySelector(".mobile-navigation");

        if (hamburger.dataset.active === "true") {
          hamburger.dataset.active = "false";
          mobileNav.classList.remove("active");
        } else {
          hamburger.dataset.active = "true";
          mobileNav.classList.add("active");
        }
      }
    </script>

    <!-- Reveal H1 -->
    <script>
      const tl = gsap.timeline();

      let skew = 8;
      let delay = 0.5;
      let duration = 1;

      if (window.innerWidth < 640) {
        skew = 30;
        delay = 0.8;
        duration = 1.5;
      }

      tl.from(".line span", 1, {
        y: 200,
        ease: "power-ease-4",
        delay: 0,
        skewY: skew,
        stagger: {
          amount: 0.3,
        },
      });

      tl.from(
        ".hero-section__content",
        duration,
        {
          ease: "power-ease-4",
          delay: delay,
          opacity: 0,
          stagger: {
            amount: 0.3,
          },
        },
        "-=1"
      );
    </script>

    <!-- Parallax -->
    <script>
      gsap.registerPlugin(ScrollTrigger);

      gsap.utils.toArray(".parallax").forEach(function (container) {
        let image = container.querySelector("img");

        let tl = gsap.timeline({
          scrollTrigger: {
            trigger: container,
            scrub: true,
            pin: false,
          },
        });
        tl.from(image, {
          yPercent: -20,
          ease: "none",
        }).to(image, {
          yPercent: 20,
          ease: "none",
        });
      });
    </script>

    <!-- Mousetracker -->
    <script>
      var container = document.querySelector(".slider");
      var prev = document.querySelector(".prev-slide-btn");
      var next = document.querySelector(".next-slide-btn");

      window.onmousemove = (event) => moveCursor(event);
      prev.onmousemove = (event) => moveCursor(event);
      next.onmousemove = (event) => moveCursor(event);

      const moveCursor = (event, border) => {
        let windowWidth = window.innerWidth;

        var x = event.clientX;
        var y = event.clientY;

        let windowScrollTop = window.pageYOffset;
        let sliderOffset = container.offsetTop;
        let sliderHeight = container.offsetHeight;

        let relativeTop = sliderOffset - windowScrollTop;
        // console.log("top: " + relativeTop);

        let relativeBottom = relativeTop + sliderHeight;
        // console.log("bottom: " + relativeBottom);

        // console.log("Y: " + y);

        if (windowWidth / 2 < x) {
          // console.log("next");
          next.style.top = `${y}px`;
          next.style.left = `${x}px`;
          next.classList.add("active");
          prev.classList.remove("active");
        } else {
          // console.log("prev");
          prev.style.top = `${y}px`;
          prev.style.left = `${x}px`;
          prev.classList.add("active");
          next.classList.remove("active");
        }

        // console.log("Height" + container.offsetHeight);
        // console.log("Top" + container.offsetTop);
        // console.log("WindowHeight" + window.pageYOffset);

        if (y > relativeTop && y < relativeBottom) {
          console.log("in");
        } else {
          console.log("out");
          prev.style.top = 0;
          next.style.top = 0;
          prev.classList.remove("active");
          next.classList.remove("active");
        }
      };
    </script>

    <!-- Slider Logic -->
    <script>
      let index = 0;
      const slider = document.querySelector(".slider");
      const slides = slider.querySelectorAll(".slide");

      const breakWidth = 100 * 16;
      const mobileBreakWidth = 40 * 16;
      const tabletBreakWidth = 60 * 16;

      let offset = breakWidth * 0.1;
      let sideMargin = 0;

      let slideOffset = 0;

      window.onresize = () => handleResize();

      // set margin of first slide
      const handleResize = () => {
        if (window.innerWidth > breakWidth) {
          sideMargin = (window.innerWidth - breakWidth) / 2;
        } else {
          sideMargin = 16;
          offset = (window.innerWidth - 32) * 0.1;
        }

        if (window.innerWidth > mobileBreakWidth) {
          slides[0].style.marginLeft = `${offset + sideMargin}px`;
        }

        // Make all slides active on mobile and disable buttons
        if (window.innerWidth <= tabletBreakWidth) {
          slides.forEach((slide) => slide.classList.add("active-slide"));
          next.style.display = "none";
          prev.style.display = "none";
        } else {
          slides.forEach((slide) => slide.classList.remove("active-slide"));
          slides[index].classList.add("active-slide");
          next.style.display = "block";
          prev.style.display = "block";
        }

        updateSlider();
      };

      handleResize();

      // onclick function of buttons
      function increaseIndex() {
        if (index < slides.length - 1) {
          index++;
          updateSlider();
        }
      }

      function decreaseIndex() {
        if (index > 0) {
          index--;
          updateSlider();
        }
      }

      // update slider
      function updateSlider() {
        slides.forEach((slide) => slide.classList.remove("active-slide"));
        slides[index].classList.add("active-slide");
        console.log("Index: " + index);

        slideOffset = index * (640 + 32);

        slides.forEach(
          (slide) => (slide.style.transform = `translateX(${-slideOffset}px)`)
        );
        // console.log(offset + sideMargin - slideOffset);
      }
    </script>
  </body>
</html>
